# FOMC Diagnostic Tool - Streamlit App

## Overview

Interactive web app for **diagnostic analysis** of FOMC communications. This is NOT a point prediction tool - it provides sophisticated probabilistic analysis acknowledging uncertainty.

## Features

### 1. Percentile Scoring
- Score each statement relative to all historical Fed language
- "90th percentile hawkish" instead of arbitrary scores
- Composite score from GPT-4, BART, and FinBERT

### 2. Change Highlighting
- Word-level linguistic changes detected
- Hedge vs. certainty language shifts
- Verb tense changes (forward guidance)
- Negation additions/removals
- Fed-specific word substitutions (transitory â†’ persistent)

### 3. Nearest Neighbor Retrieval
- Find k most similar historical statements
- Show their actual market reactions
- Compare current statement to past episodes

### 4. Probabilistic Forecasts
- **NOT**: "Yields will rise 4.3 bp"
- **INSTEAD**: "Based on 20 similar statements, 80% of outcomes fell between -1 and +8 bp"
- Conditional distributions
- Quantile predictions (10th, 50th, 90th percentiles)
- Tail risk estimates (prob of >10bp moves)
- Directional probabilities

## Installation

### Prerequisites

```bash
# Install required packages
pip install streamlit plotly scikit-learn pandas numpy
```

### Data Requirements

The app requires these files (generated by `run_analysis.py`):
- `data_enhanced_with_changes.csv` - 432 FOMC statements with 112 features
- `model_results.csv` - Model performance metrics (optional)
- `feature_importance.csv` - SHAP-based feature rankings (optional)

If these files don't exist, run:
```bash
python run_analysis.py
python run_shap_analysis.py
```

## Usage

### Start the App

```bash
streamlit run app_streamlit_diagnostic.py
```

This will open the app in your browser at `http://localhost:8501`

### Using the App

1. **Select a historical statement** from the dropdown
2. Click **"Run Diagnostic Analysis"**
3. Review the 4-part diagnostic output:
   - Percentile score (how hawkish vs. history)
   - Linguistic changes detected
   - Most similar historical statements
   - Probabilistic forecast with conditional distribution

### Tabs

- **ðŸ”¬ Diagnostic Analysis**: Main analysis interface
- **ðŸ“Š Historical Data**: Time series of all FOMC reactions
- **ðŸ“ˆ Model Performance**: Model metrics and feature importance

## What Makes This Different

### Traditional Approach (Point Predictions)
```
Prediction: 2Y yields will rise 4.3 bp
Confidence: 72%
```
**Problems**:
- False precision (RÂ² is negative!)
- Ignores massive uncertainty
- Single number is not actionable

### Diagnostic Approach (This App)
```
Hawkishness: 82nd percentile (very hawkish)

Key Changes:
- Inflation language shifted toward 'persistent' (+2 intensity)
- Reduced hedging language (-3 hedge words)
- Increased certainty language (+5 certainty words)

Similar Historical Statements:
- 2023-07-26 â†’ Actual: +4.2 bp
- 2023-05-03 â†’ Actual: +6.1 bp
- 2023-03-22 â†’ Actual: +3.8 bp

Conditional Forecast:
- Median: +5.1 bp
- 80% interval: [-1.2, +11.3] bp
- Prob(yields rise): 65%
- Tail risk (>10bp): 15%
```
**Advantages**:
- Acknowledges uncertainty
- Shows what drives the assessment
- Provides actionable probability ranges
- More useful for practitioners

## Technical Details

### Model
- Random Forest (100 trees, max_depth=10)
- Trained on 432 FOMC statements (2000-2025)
- 99 features used for prediction

### Features (112 total)
- **13** original NLP features (GPT-4, FinBERT, BART)
- **32** sentence-level change features
- **24** word-level linguistic features (NEW!)
  - Hedge/certainty tracking
  - Fed word substitutions
  - Adjective intensity
  - Negation changes
  - Verb tense shifts
- Market reaction targets (dy2_1d_bp, dy5_1d_bp, dy10_1d_bp)

### Performance
- CV RMSE: 7.61 bp (Random Forest)
- Holdout RMSE: 6.68 bp
- Top word-level feature: `subtle_certainty_word_count_current` (rank #8)

## Customization

### Adjust Number of Neighbors

Use the sidebar slider to change how many similar statements are used for the probabilistic forecast (default: 20).

### Change Target Yield

Select from:
- 2-Year Treasury (dy2_1d_bp)
- 5-Year Treasury (dy5_1d_bp)
- 10-Year Treasury (dy10_1d_bp)

## Files

- `app_streamlit_diagnostic.py` - Main Streamlit app (800+ lines)
- `fomc_analysis_utils.py` - Backend utilities with diagnostic classes
- `data_enhanced_with_changes.csv` - Enhanced dataset
- `model_results.csv` - Model performance (optional)
- `feature_importance.csv` - Feature rankings (optional)

## Deployment

### Deploy to Streamlit Cloud

1. Push to GitHub
2. Go to [share.streamlit.io](https://share.streamlit.io)
3. Connect your repo
4. Select `app_streamlit_diagnostic.py`
5. Deploy!

**Note**: You'll need to include the data files or regenerate them on deployment.

### Deploy Locally (Production)

```bash
# Run on specific port
streamlit run app_streamlit_diagnostic.py --server.port 8080

# Allow external access
streamlit run app_streamlit_diagnostic.py --server.address 0.0.0.0
```

## Example Use Cases

### For Traders
- Assess new FOMC statement within minutes
- See probabilistic range of outcomes
- Compare to similar historical episodes
- Understand tail risks

### For Researchers
- Validate that word-level features matter
- Show diagnostic approach is more useful than point predictions
- Demonstrate nearest neighbor methodology
- Academic publication demo

### For Fed Watchers
- Track how hawkish/dovish statements are over time
- See what linguistic changes matter for markets
- Understand historical patterns

## Troubleshooting

### Error: "Could not load data_enhanced_with_changes.csv"
**Solution**: Run `python run_analysis.py` first to generate the data file.

### Error: Module not found
**Solution**: Install missing packages:
```bash
pip install streamlit plotly scikit-learn pandas numpy
```

### App is slow
**Solution**: First run trains the model. Subsequent runs use cached model and are much faster.

## Academic Citation

If using this tool for research, please cite:

```
Raufi, A. (2025). "Reading Between the Lines: How Subtle Linguistic Changes
in FOMC Statements Move Markets." FOMC Diagnostic Tool.
https://github.com/amirraufi/FOMC_Data_Science
```

## License

MIT License - See repository for details.

## Contact

For questions or issues:
- Open an issue on GitHub
- See main README.md for contact info

---

**Last Updated**: 2025-11-17
**Version**: 1.0.0
**Status**: âœ… Production Ready
