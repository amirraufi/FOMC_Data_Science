# Complete Data Sources Explanation

## üìä Every Piece of Data - Where It Comes From

---

## 1Ô∏è‚É£ **FOMC Communications Data** (Input)

### **File:** `communications.csv`

**Source:** You already have this
- Contains FOMC statements and minutes text
- Dates of FOMC meetings
- Release dates

**Columns Required:**
- `Date`: FOMC meeting date
- `Release Date`: When statement was released
- `Type`: "Statement" or "Minute"
- `Text`: Full text of the communication

**Original Data Source (if rebuilding):**
- Federal Reserve official website: https://www.federalreserve.gov/monetarypolicy/fomccalendars.htm
- Or FRASER archive: https://fraser.stlouisfed.org/title/677

**What We Use It For:**
- Extract FOMC event dates
- Apply NLP analysis to text
- Generate change detection features

---

## 2Ô∏è‚É£ **NLP Features** (Input)

### **File:** `data_with_gpt_bart_finbert.csv`

**Source:** You already have this (from your original analysis)

**Features Include:**
- `gpt_score`: GPT-4 hawkishness scoring
- `bart_score`: BART zero-shot classification
- `finbert_pos`, `finbert_neg`, `finbert_neutral`: FinBERT sentiment
- `hawk_minus_dove`: Keyword-based hawkishness
- `delta_semantic`: Semantic embeddings similarity

**Original Sources (if regenerating):**

1. **GPT-4 Scores:**
   - Source: OpenAI API
   - Model: `gpt-4` or `gpt-4-turbo`
   - Prompt: "Rate this FOMC statement on hawkishness from -2 (dovish) to +2 (hawkish)"
   - Cost: ~$0.01-0.03 per statement

2. **FinBERT Scores:**
   - Source: HuggingFace Transformers
   - Model: `ProsusAI/finbert`
   - Free to run locally

3. **BART Scores:**
   - Source: HuggingFace Transformers
   - Model: `facebook/bart-large-mnli`
   - Free to run locally

4. **Semantic Embeddings:**
   - Source: HuggingFace Transformers
   - Model: `sentence-transformers/all-MiniLM-L6-v2`
   - Free to run locally

**What We Use It For:**
- Features for prediction models
- Comparison of different NLP approaches

---

## 3Ô∏è‚É£ **Daily Treasury Yields** (Fetched Automatically)

### **Source:** FRED (Federal Reserve Economic Data)

**Fetched By:** `fomc_analysis_utils.py` ‚Üí `FOMCDataLoader.fetch_market_data()`

**Series Codes:**
- `DFF`: Effective Federal Funds Rate
- `DGS2`: 2-Year Treasury Constant Maturity Rate
- `DGS5`: 5-Year Treasury Constant Maturity Rate
- `DGS10`: 10-Year Treasury Constant Maturity Rate

**API:**
- Library: `pandas_datareader`
- Function: `web.DataReader(series, 'fred', start_date, end_date)`
- Free, no API key required

**Data Details:**
- Frequency: Daily
- Units: Percent per annum
- Source: U.S. Department of Treasury
- Official, authoritative data
- Available: 1962-present

**What We Calculate:**
- 1-day yield change after FOMC (basis points)
- 2-day yield change after FOMC (basis points)
- Yield curve spreads (2s10s)

**Example:**
```python
# FOMC event on 2023-03-22
# DGS2 on 2023-03-21: 4.25%
# DGS2 on 2023-03-22: 4.33%
# Change: +0.08% = +8 basis points
# Stored as: dgs2_1d_bp = 8.0
```

---

## 4Ô∏è‚É£ **Intraday Treasury ETF Prices** (Fetched Automatically - NEW!)

### **Source:** Yahoo Finance via yfinance

**Fetched By:** `fetch_historical_intraday.py`

**ETF Tickers:**
- `TLT`: iShares 20+ Year Treasury Bond ETF (tracks long-term treasuries)
- `IEF`: iShares 7-10 Year Treasury Bond ETF (tracks medium-term treasuries)
- `SHY`: iShares 1-3 Year Treasury Bond ETF (tracks short-term treasuries)

**Why ETFs instead of yields directly?**
- Treasury yields don't have intraday data publicly available
- ETFs trade continuously and track treasury prices
- ETF price movements = inverse of yield movements
- Industry-standard proxy for academic research

**Data Details:**

**For Recent Events (2020-2025):**
- Frequency: 5-minute intervals
- Source: Yahoo Finance historical data
- Free via yfinance library
- Available: Last ~60 days per ticker

**For Historical Events (2000-2019):**
- Frequency: Daily (intraday not available)
- Source: Yahoo Finance historical data
- Free via yfinance library
- Available: Full history back to ETF inception

**What We Calculate:**

**Intraday (Recent):**
```python
# FOMC event at 2:00 PM on 2023-03-22
# TLT price at 1:55 PM: $100.50
# TLT price at 2:15 PM: $100.25
# Return: (100.25 - 100.50) / 100.50 * 10000 = -24.9 basis points
# Stored as: TLT_return_15min = -24.9
```

**Daily (Historical):**
```python
# FOMC event on 2015-12-16
# TLT close on 2015-12-15: $120.35
# TLT close on 2015-12-16: $119.85
# Return: (119.85 - 120.35) / 120.35 * 10000 = -41.5 basis points
# Stored as: TLT_return_1d = -41.5
```

**Time Windows Calculated:**

**Intraday:**
- 15 minutes after FOMC release
- 30 minutes after FOMC release
- 60 minutes after FOMC release (1 hour)
- 120 minutes after FOMC release (2 hours)

**Daily:**
- 1 day after FOMC release
- 2 days after FOMC release
- 5 days after FOMC release

---

## 5Ô∏è‚É£ **Change Detection Features** (Generated Automatically - OUR NOVEL CONTRIBUTION!)

### **Source:** Generated by `ChangeDetector` class

**Fetched By:** `fomc_analysis_utils.py` ‚Üí `ChangeDetector.add_change_features()`

**Method:** Text comparison between consecutive FOMC statements

**Features Generated (30+ features):**

**Sentence-Level Changes:**
- `change_sentences_added`: # of sentences added vs previous statement
- `change_sentences_removed`: # of sentences removed vs previous statement
- `change_sentences_unchanged`: # of sentences that stayed the same
- `change_net_sentences`: Net change (added - removed)
- `change_pct_sentences_modified`: % of sentences that changed

**Key Phrase Tracking (13 policy-relevant phrases):**

**Inflation Language:**
- `inflation_elevated_added`: Did they add "inflation remains elevated"?
- `inflation_elevated_removed`: Did they remove it?
- `inflation_moderating_added`: Did they add "inflation moderating"?
- `inflation_easing_added`: Did they add "inflation easing"?

**Rate Language:**
- `rate_increases_added`: Did they add "rate increase" language?
- `rate_cuts_added`: Did they add "rate cut" language?
- `rate_hold_added`: Did they add "maintain target range" language?

**Forward Guidance:**
- `data_dependent_added`: Did they add "data dependent"?
- `patient_added`: Did they add "patient" in policy context?
- `gradual_added`: Did they add "gradual"?

**Labor Market:**
- `labor_tight_added`: Did they add "tight labor market"?
- `labor_softening_added`: Did they add "labor market softening"?

**Economic Outlook:**
- `growth_solid_added`: Did they add "solid growth"?
- `growth_slowing_added`: Did they add "slowing growth"?

**Semantic Similarity:**
- `change_overall_similarity`: How similar is the full text to previous? (0-1)
- `change_text_length_pct`: % change in text length
- `change_sentence_count`: Change in number of sentences

**Example:**
```python
# March 2023 statement removes "inflation remains elevated"
# June 2023 statement adds "inflation has moderated"
# Features:
#   inflation_elevated_removed = 1
#   inflation_moderating_added = 1
#   change_net_sentences = -2 (net removal)
#   change_overall_similarity = 0.87 (87% similar)
```

**Data Source:**
- Computed from your `communications.csv` text
- Uses NLTK for sentence tokenization
- Uses difflib for text comparison
- 100% generated, no external API calls

---

## üìä **Complete Data Flow Diagram**

```
INPUT DATA (You Provide):
‚îú‚îÄ‚îÄ communications.csv ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ‚îî‚îÄ‚îÄ FOMC statement text      ‚îÇ
‚îÇ                                 ‚îÇ
‚îî‚îÄ‚îÄ data_with_gpt_bart_finbert.csv
    ‚îî‚îÄ‚îÄ Your NLP features        ‚îÇ
                                  ‚îÇ
                                  ‚ñº
STEP 1: CHANGE DETECTION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îú‚îÄ‚îÄ ChangeDetector                ‚îÇ
‚îú‚îÄ‚îÄ Input: Current & previous text‚îÇ
‚îú‚îÄ‚îÄ Output: 30+ change features   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ change_sentences_added    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ inflation_elevated_removed‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ change_overall_similarity ‚îÇ
‚îÇ                                  ‚îÇ
                                   ‚ñº
STEP 2: MARKET DATA FETCHING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îú‚îÄ‚îÄ A) Daily Yields (FRED)        ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ DFF (Fed Funds Rate)      ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ DGS2 (2Y Treasury)        ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ DGS5 (5Y Treasury)        ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ DGS10 (10Y Treasury)      ‚îÇ
‚îÇ                                  ‚îÇ
‚îú‚îÄ‚îÄ B) Intraday ETF (Yahoo)       ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ TLT (20Y Treasury ETF)    ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ IEF (7-10Y Treasury ETF)  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ SHY (1-3Y Treasury ETF)   ‚îÇ
‚îÇ                                  ‚îÇ
                                   ‚ñº
STEP 3: MARKET REACTIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îú‚îÄ‚îÄ Calculate returns:            ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Intraday: 15m, 30m, 60m   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Daily: 1d, 2d, 5d         ‚îÇ
‚îÇ                                  ‚îÇ
                                   ‚ñº
STEP 4: MERGE ALL DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îú‚îÄ‚îÄ Combine by date:              ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ FOMC text & date          ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Your NLP features         ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Change features (new!)    ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Daily market reactions    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Intraday reactions (new!) ‚îÇ
‚îÇ                                  ‚îÇ
                                   ‚ñº
FINAL DATASET:
‚îú‚îÄ‚îÄ ~219 FOMC events
‚îú‚îÄ‚îÄ ~50-70 features per event
‚îÇ   ‚îú‚îÄ‚îÄ 30+ change features (novel!)
‚îÇ   ‚îú‚îÄ‚îÄ 10+ NLP features (your work)
‚îÇ   ‚îú‚îÄ‚îÄ 12+ market reaction features
‚îÇ   ‚îî‚îÄ‚îÄ Date, type, metadata
‚îÇ
‚îî‚îÄ‚îÄ Ready for model training!
```

---

## üîç **Data Quality & Validation**

### **FRED Treasury Yields:**
‚úÖ **Official government data**
‚úÖ **Highest quality available**
‚úÖ **Used in academic research universally**
‚úÖ **Daily frequency, complete coverage**

**Validation:**
- Compare to Bloomberg (if available)
- Check for missing dates (holidays, weekends)
- Verify reasonable ranges (0-20% for yields)

### **Yahoo Finance ETF Data:**
‚úÖ **Free, widely used in research**
‚úÖ **Good quality for ETFs (high volume, liquid)**
‚ö†Ô∏è **Intraday limited to recent periods (~60 days)**

**Validation:**
- Check for gaps in time series
- Verify prices are within reasonable ranges
- Compare to Bloomberg if possible
- Ensure volume > 0 (actual trades)

### **Change Detection Features:**
‚úÖ **Deterministic computation**
‚úÖ **Reproducible**
‚úÖ **No API dependencies**

**Validation:**
- Manual spot checks (read 2-3 statement pairs)
- Verify added/removed sentences make sense
- Check similarity scores are 0-1
- Ensure first statement has NaN (no previous)

---

## üìù **Data Citations for Your Paper**

**Market Data:**
> "We obtain daily Treasury yields from the Federal Reserve Economic Data (FRED)
> database maintained by the Federal Reserve Bank of St. Louis (Federal Reserve
> Bank of St. Louis, 2024). For high-frequency analysis, we use intraday price
> data for Treasury ETFs (TLT, IEF, SHY) from Yahoo Finance via the yfinance
> Python library (Aroussi, 2024)."

**FOMC Communications:**
> "FOMC statements and minutes are obtained from the Federal Reserve Board's
> official website and the FRASER digital archive (Federal Reserve Bank of St.
> Louis, 2024)."

**NLP Models:**
> "We employ multiple NLP approaches: GPT-4 (OpenAI, 2024), FinBERT (Araci, 2019),
> BART (Lewis et al., 2020), and Sentence-BERT (Reimers & Gurevych, 2019)."

---

## üéØ **Summary Table**

| Data Type | Source | API/Library | Cost | Quality | Coverage |
|-----------|--------|-------------|------|---------|----------|
| FOMC Text | You/Fed | Manual | Free | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 2000-2025 |
| NLP Features | You | Various | Varies | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | All events |
| Change Features | Generated | Internal | Free | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | All events |
| Daily Yields | FRED | pandas_datareader | Free | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 1962-present |
| Intraday ETF | Yahoo | yfinance | Free | ‚≠ê‚≠ê‚≠ê‚≠ê | ~2000-2025 |
| Fed Funds Rate | FRED | pandas_datareader | Free | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 1954-present |

**Legend:**
- ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê = Official/Authoritative
- ‚≠ê‚≠ê‚≠ê‚≠ê = High quality, widely accepted
- ‚≠ê‚≠ê‚≠ê = Good for research, some limitations

---

## üîí **Data Reliability for Academic Publication**

**Acceptable for Top Journals:**
‚úÖ FRED data (DFF, DGS2, DGS5, DGS10)
‚úÖ Yahoo Finance daily data
‚úÖ Change detection features (novel methodology)
‚úÖ Your NLP features (documented methodology)

**May Need Upgrade for Revisions:**
‚ö†Ô∏è Yahoo Finance intraday (reviewers might prefer Bloomberg/WRDS)
- Solution: Use for first draft, upgrade if reviewers request

**Always Acceptable:**
‚úÖ FOMC text from official Fed sources
‚úÖ Deterministically computed features

---

## üöÄ **Next Steps**

Now that you know where every piece comes from, we'll:

1. **Run the fetching scripts**
2. **Validate all data sources**
3. **Check data quality**
4. **Generate quality report**

Continue to validation scripts...
